
<!DOCTYPE html>
<html lang="en">
<head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Bible Reading Planner - Besorah Yeshua</title>
    <meta name="description" content="Free Bible reading planner with 3 reading plans: 90-day New Testament, OT365, and Ethiopian calendar support">
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/planner.css">
    <style>
        /* Additional styles from previous planner.css additions */
        .upgrade-link {
            color: var(--primary-color);
            font-weight: 600;
            text-decoration: none;
            font-size: 0.9rem;
            border: 2px solid var(--primary-color);
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .upgrade-link:hover {
            background: var(--primary-color);
            color: white;
        }

        .upgrade-cta {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
            border-left: 4px solid #f59e0b;
        }

        .upgrade-cta p {
            margin-bottom: 1rem;
            color: #92400e;
        }

        .comparison-section {
            margin-top: 2rem;
            padding: 2rem;
            background: var(--background);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 1.5rem;
        }

        .comparison-card {
            padding: 1.5rem;
            border-radius: var(--border-radius);
            border: 2px solid var(--border-color);
        }

        .comparison-card.highlight {
            border-color: var(--primary-color);
            background: var(--surface);
        }

        .comparison-card h4 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .comparison-card ul {
            list-style: none;
            padding-left: 0;
            margin-bottom: 1.5rem;
        }

        .comparison-card li {
            padding: 0.5rem 0;
            color: var(--text-secondary);
            position: relative;
            padding-left: 1.5rem;
        }

        .comparison-card li:before {
            content: "‚úì";
            color: var(--success-color);
            position: absolute;
            left: 0;
        }

        .comparison-card li:contains("‚úó"):before {
            content: "‚úó";
            color: #ef4444;
        }

        .action-btn.highlight {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        }

        .action-btn.highlight:hover {
            border-color: var(--primary-hover);
            background: linear-gradient(135deg, #fde68a 0%, #fcd34d 100%);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="index.html">üìñ Besorah Yeshua</a>
            </div>
            <div class="nav-actions">
                <button id="startPlanBtn" class="btn btn-primary btn-sm">Start Plan Today</button>
                <button id="resetBtn" class="btn btn-secondary btn-sm">Reset Progress</button>
                <a href="../basic-tier/index.html" class="btn btn-secondary btn-sm">Upgrade to Basic</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="planner-container">
        <div class="container">
            <!-- Header -->
            <div class="planner-header">
                <h1>Free Bible Reading Planner</h1>
                <div class="calendar-toggle">
                    <button id="gregorianBtn" class="calendar-btn active">Gregorian</button>
                    <button id="ethiopianBtn" class="calendar-btn">Ethiopian</button>
                </div>
            </div>

            <!-- Stats Dashboard -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üìö</div>
                    <div class="stat-content">
                        <div class="stat-value" id="totalReading">0</div>
                        <div class="stat-label">Total Days</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-content">
                        <div class="stat-value" id="completedReading">0</div>
                        <div class="stat-label">Completed</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-content">
                        <div class="stat-value" id="progressPercent">0%</div>
                        <div class="stat-label">Progress</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üî•</div>
                    <div class="stat-content">
                        <div class="stat-value" id="streakDays">0</div>
                        <div class="stat-label">Day Streak</div>
                    </div>
                </div>
            </div>

            <!-- Reading Plan Selector -->
            <div class="plan-selector">
                <label for="readingPlan">Select Free Reading Plan:</label>
                <select id="readingPlan" class="form-select">
                    <option value="nt90">90-Day New Testament</option>
                    <option value="ot365">OT365 Challenge (1-Year OT)</option>
                    <option value="ethiopian">Ethiopian Calendar Plan</option>
                </select>
                <p class="plan-description" id="planDescription">Read through the New Testament in 90 days</p>
                <div class="plan-stats" id="planStats">
                    <span>üìñ <span id="planChapters">260</span> total chapters</span>
                    <span>‚è±Ô∏è <span id="planTime">15-25 min/day</span></span>
                    <span>üìÖ <span id="planDays">90</span> days</span>
                </div>
            </div>

            <!-- Calendar View -->
            <div class="calendar-section">
                <div class="calendar-header">
                    <button id="prevMonth" class="nav-btn">‚Äπ</button>
                    <h2 id="currentMonth">Loading...</h2>
                    <button id="nextMonth" class="nav-btn">‚Ä∫</button>
                </div>
                <div id="calendar" class="calendar-grid">
                    <!-- Calendar will be generated by JavaScript -->
                </div>
            </div>

            <!-- Today's Reading -->
            <div class="reading-section">
                <div class="reading-header">
                    <h2>Today's Reading</h2>
                    <div class="day-info">
                        <span id="currentDay">Day 1</span>
                        <span id="currentTheme" class="theme-badge">Birth & Early Ministry</span>
                    </div>
                </div>
                <div id="todayReading" class="reading-card">
                    <p class="reading-placeholder">Select a date to view reading plan</p>
                </div>
                
                <div class="reading-actions">
                    <label class="reading-checkbox">
                        <input type="checkbox" id="markComplete">
                        <span>Mark today's reading as completed</span>
                    </label>
                    <a href="../basic-tier/index.html" class="upgrade-link">Upgrade for detailed study notes</a>
                </div>
            </div>

            <!-- Basic Notes Section -->
            <div class="notes-section">
                <h3>Study Notes & Reflection</h3>
                <div class="reflection-prompts">
                    <p class="prompt-title">Reflection Questions:</p>
                    <ul class="prompts-list">
                        <li>What does this passage reveal about God's character?</li>
                        <li>What command should I obey or truth should I believe?</li>
                        <li>How does this apply to my life today?</li>
                        <li>What sin should I confess and forsake?</li>
                        <li>Who should I share this truth with?</li>
                    </ul>
                </div>
                <textarea id="studyNotes" class="study-textarea" placeholder="Write your reflections, insights, and prayers here..." readonly></textarea>
                <div class="upgrade-cta">
                    <p>‚úèÔ∏è <strong>Upgrade to Basic Tier to save notes:</strong> Your notes will only be saved for this session.</p>
                    <a href="../basic-tier/index.html" class="btn btn-primary">Upgrade Now</a>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="actions-section">
                <h3>Quick Actions</h3>
                <div class="actions-grid">
                    <button id="jumpToday" class="action-btn">
                        <span class="action-icon">‚Ü™Ô∏è</span>
                        <span>Jump to Today</span>
                    </button>
                    <button id="viewPlan" class="action-btn">
                        <span class="action-icon">üìã</span>
                        <span>View Full Plan</span>
                    </button>
                    <button id="helpBtn" class="action-btn">
                        <span class="action-icon">‚ùì</span>
                        <span>Get Help</span>
                    </button>
                    <a href="index.html" class="action-btn">
                        <span class="action-icon">üè†</span>
                        <span>Back to Home</span>
                    </a>
                    <a href="../basic-tier/index.html" class="action-btn highlight">
                        <span class="action-icon">‚≠ê</span>
                        <span>Upgrade Features</span>
                    </a>
                    <a href="../basic-tier/pricing.html" class="action-btn">
                        <span class="action-icon">üí∞</span>
                        <span>View Pricing</span>
                    </a>
                </div>
            </div>

            <!-- Free vs Basic Comparison -->
            <div class="comparison-section">
                <h3>Free vs Basic Tier</h3>
                <div class="comparison-grid">
                    <div class="comparison-card">
                        <h4>Free Tier</h4>
                        <ul>
                            <li>‚úì 3 Reading Plans</li>
                            <li>‚úì Progress Tracking</li>
                            <li>‚úì Calendar View</li>
                            <li>‚úì Local Storage</li>
                            <li>‚úó Notes don't save between sessions</li>
                            <li>‚úó No detailed study content</li>
                            <li>‚úó No cloud backup</li>
                            <li>‚úó No export features</li>
                        </ul>
                    </div>
                    <div class="comparison-card highlight">
                        <h4>Basic Tier</h4>
                        <ul>
                            <li>‚úì Everything in Free Tier</li>
                            <li>‚úì Save study notes permanently</li>
                            <li>‚úì Detailed commentary & study guides</li>
                            <li>‚úì Cloud backup of progress</li>
                            <li>‚úì Export notes as PDF</li>
                            <li>‚úì Ethiopian calendar details</li>
                            <li>‚úì Historical context notes</li>
                            <li>‚úì Priority support</li>
                        </ul>
                        <a href="../basic-tier/pricing.html" class="btn btn-primary">Upgrade for $3/month</a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Besorah Yeshua. Free tier - your progress is saved locally in your browser.</p>
            <div class="footer-links">
                <a href="index.html">Home</a>
                <a href="#help">Help</a>
                <a href="../basic-tier/pricing.html">Upgrade</a>
                <a href="https://github.com/yourusername/besorah-yeshua-bible-planner" target="_blank">GitHub</a>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/storage.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/reading-plans.js"></script>
    <script>
        // Global functions
        function initializePlanner() {
            // Load reading plans
            if (typeof ReadingPlans !== 'undefined') {
                ReadingPlans.init().then(() => {
                    // Initialize calendar
                    if (typeof CalendarManager !== 'undefined') {
                        CalendarManager.init();
                        CalendarManager.selectDate(new Date());
                    }
                    
                    // Setup plan selector
                    const planSelector = document.getElementById('readingPlan');
                    if (planSelector) {
                        // Set current plan from storage
                        const currentPlan = StorageManager.getCurrentPlan();
                        planSelector.value = currentPlan;
                        
                        // Add change listener
                        planSelector.addEventListener('change', function(e) {
                            const newPlan = e.target.value;
                            StorageManager.setCurrentPlan(newPlan);
                            
                            // Reset start date when changing plans
                            StorageManager.setStartDate(newPlan, new Date());
                            
                            // Update display
                            if (typeof CalendarManager !== 'undefined') {
                                CalendarManager.selectDate(CalendarManager.selectedDate || new Date());
                            }
                            
                            updateStatistics();
                        });
                    }
                    
                    // Setup reset button
                    const resetBtn = document.getElementById('resetBtn');
                    if (resetBtn) {
                        resetBtn.addEventListener('click', function() {
                            if (confirm('Are you sure you want to reset all progress? This will clear all your completed readings and notes. This cannot be undone.')) {
                                StorageManager.resetAll();
                            }
                        });
                    }
                    
                    // Setup start plan button
                    const startPlanBtn = document.getElementById('startPlanBtn');
                    if (startPlanBtn) {
                        startPlanBtn.addEventListener('click', function() {
                            const plan = document.getElementById('readingPlan').value;
                            const planName = document.getElementById('readingPlan').options[document.getElementById('readingPlan').selectedIndex].text;
                            if (confirm(`Start "${planName}" plan today?`)) {
                                StorageManager.setStartDate(plan, new Date());
                                if (typeof CalendarManager !== 'undefined') {
                                    CalendarManager.selectDate(new Date());
                                }
                                updateStatistics();
                            }
                        });
                    }
                    
                    // Setup mark complete checkbox
                    const markComplete = document.getElementById('markComplete');
                    if (markComplete) {
                        markComplete.addEventListener('change', function() {
                            const isChecked = this.checked;
                            const date = CalendarManager?.selectedDate || new Date();
                            
                            if (isChecked) {
                                StorageManager.markComplete(date);
                            } else {
                                StorageManager.unmarkComplete(date);
                            }
                            
                            if (typeof CalendarManager !== 'undefined') {
                                CalendarManager.render();
                            }
                            updateStatistics();
                        });
                    }
                    
                    // Setup jump to today button
                    const jumpToday = document.getElementById('jumpToday');
                    if (jumpToday) {
                        jumpToday.addEventListener('click', function() {
                            if (typeof CalendarManager !== 'undefined') {
                                CalendarManager.selectDate(new Date());
                            }
                        });
                    }
                    
                    // Setup view plan button
                    const viewPlan = document.getElementById('viewPlan');
                    if (viewPlan) {
                        viewPlan.addEventListener('click', function() {
                            const plan = document.getElementById('readingPlan').value;
                            const planInfo = ReadingPlans.getPlanInfo(plan);
                            alert(`You are on the "${planInfo.name}" plan.\n\n${planInfo.description}\n\nTotal: ${planInfo.days} days\nAverage: ~${planInfo.avgChaptersPerDay} chapters/day\n\nUpgrade to Basic Tier for full plan details.`);
                        });
                    }
                    
                    // Setup help button
                    const helpBtn = document.getElementById('helpBtn');
                    if (helpBtn) {
                        helpBtn.addEventListener('click', function() {
                            alert(`Help & Tips:\n\n1. Select a reading plan from the dropdown\n2. Click "Start Plan Today" to begin from today\n3. Click on calendar dates to view readings\n4. Mark readings as complete when finished\n5. Your progress saves locally\n\nNeed more help? Upgrade to Basic Tier for priority support.`);
                        });
                    }
                    
                    // Setup save notes button (shows upgrade message)
                    const studyTextarea = document.getElementById('studyNotes');
                    if (studyTextarea) {
                        studyTextarea.addEventListener('click', function() {
                            alert('‚úèÔ∏è Upgrade to Basic Tier to save study notes permanently. In the free tier, notes are only saved for your current session.');
                        });
                    }
                    
                    // Update statistics
                    updateStatistics();
                    
                }).catch(error => {
                    console.error('Error initializing planner:', error);
                    const readingContainer = document.getElementById('todayReading');
                    if (readingContainer) {
                        readingContainer.innerHTML = `
                            <div class="error-message">
                                <p>‚ö†Ô∏è Could not load reading plans. Using basic reading schedule...</p>
                            </div>
                        `;
                    }
                });
            }
        }
        
        function updateStatistics() {
            if (typeof StorageManager !== 'undefined' && typeof ReadingPlans !== 'undefined') {
                const stats = StorageManager.getStatistics();
                const plan = StorageManager.getCurrentPlan();
                const planInfo = ReadingPlans.getPlanInfo(plan);
                
                // Get total readings based on plan
                const totalReadings = planInfo.days || 90;
                
                // Update DOM
                const totalEl = document.getElementById('totalReading');
                const completedEl = document.getElementById('completedReading');
                const progressEl = document.getElementById('progressPercent');
                const streakEl = document.getElementById('streakDays');
                
                if (totalEl) totalEl.textContent = totalReadings;
                if (completedEl) completedEl.textContent = stats.totalCompleted;
                if (progressEl) {
                    const percent = Math.round((stats.totalCompleted / totalReadings) * 100);
                    progressEl.textContent = `${percent}%`;
                }
                if (streakEl) streakEl.textContent = stats.currentStreak;
            }
        }
        
        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            // Set initial plan from URL parameter if present
            const urlParams = new URLSearchParams(window.location.search);
            const planParam = urlParams.get('plan');
            if (planParam && ['nt90', 'ot365', 'ethiopian'].includes(planParam)) {
                StorageManager.setCurrentPlan(planParam);
            }
            
            initializePlanner();
        });
    </script>
</body>
</html>